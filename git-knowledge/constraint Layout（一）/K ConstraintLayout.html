<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 6.11 (454874)"/><meta name="altitude" content="9.758199691772461"/><meta name="author" content="alanfujindong@gmail.com"/><meta name="created" content="2017-06-07 00:07:36 +0000"/><meta name="latitude" content="31.89305839964586"/><meta name="longitude" content="120.5215960738211"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2017-06-10 07:01:12 +0000"/><title>K ConstraintLayout</title></head><body><div>ConstraintLayout 正式版已经发布许久是时候整理整理了，当时发布这个布局的时候我稍微看了一下，就是拖拽控件，加一些约束。我个人并不喜欢直接拖拽，还是直接喜欢在xml中编写比较直观。控件拖拽只是辅助。</div><div>本篇文章主要还是constraintLayout XML 标签的应用  下一篇 主要是 constraintLayout 在java代码中的实现。</div><div><br/></div><div><br/></div><div>在依赖中引入 constraint-layout 建议使用android studio 2.3 的版本 </div><div>compile <span style="color: #6a8759;">'com.android.support.constraint:constraint-layout:1.0.2</span><span style="color: rgb(106, 135, 89);">’</span></div><div><br/></div><div><br/></div><div>google 文档</div><div><a href="https://developer.android.google.cn/training/constraint-layout/index.html">https://developer.android.google.cn/training/constraint-layout/index.html</a></div><div><a href="https://developer.android.google.cn/reference/android/support/constraint/ConstraintLayout.html#VirtualHelpers">https://developer.android.google.cn/reference/android/support/constraint/ConstraintLayout.html#VirtualHelpers</a></div><div><br/></div><div>源码地址：<a href="https://github.com/ScottFJD/Android-develop-skills">https://github.com/ScottFJD/Android-develop-skills</a></div><div><br/></div><hr/><div><br/></div><div><br/></div><div><br/></div><div><span style="font-size: 18px;">相对位置（Relative Positioning Constraint）</span></div><div><br/></div><div><img src="K%20ConstraintLayout.resources/1B36E639-EC11-48D4-9ADC-020453592EEB.png" height="155" width="574"/><br/></div><div><br/></div><div>相关属性：</div><ul style="color: rgba(0, 0, 0, 0.68); font-family: Roboto, sans-serif; font-size: 14px; text-align: start; background-color: rgb(255, 255, 255);"><li><span style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Monaco, Courier, monospace;">layout_constraintLeft_toLeftOf</span></li><li><span style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Monaco, Courier, monospace;">layout_constraintLeft_toRightOf</span></li><li><span style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Monaco, Courier, monospace;">layout_constraintRight_toLeftOf</span></li><li><span style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Monaco, Courier, monospace;">layout_constraintRight_toRightOf</span></li><li><span style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Monaco, Courier, monospace;">layout_constraintTop_toTopOf</span></li><li><span style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Monaco, Courier, monospace;">layout_constraintTop_toBottomOf</span></li><li><span style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Monaco, Courier, monospace;">layout_constraintBottom_toTopOf</span></li><li><span style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Monaco, Courier, monospace;">layout_constraintBottom_toBottomOf</span></li><li><span style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Monaco, Courier, monospace;">layout_constraintBaseline_toBaselineOf</span></li><li><span style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Monaco, Courier, monospace;">layout_constraintStart_toEndOf</span></li><li><span style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Monaco, Courier, monospace;">layout_constraintStart_toStartOf</span></li><li><span style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Monaco, Courier, monospace;">layout_constraintEnd_toStartOf</span></li><li><span style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Monaco, Courier, monospace;">layout_constraintEnd_toEndOf</span></li></ul><div>    具体的意思与 RelativeLayout 中的定位关系差不多</div><div>例如：layout_constraintLeft(是指本控件的左边)_toLeftOf(在目标对象的左边)</div><div>Layout_constraintLeft_toLeftOf=“parent”  控件的左边与父控件的左边对齐</div><div><br/></div><div><br/></div><div><br/></div><div><span style="font-size: 18px;">边缘(Margins)</span></div><div><br/></div><div><br/></div><h4 style="text-align: start;"><img src="K%20ConstraintLayout.resources/FBDC2693-6D25-4B0E-AF66-45F0A6C4A9FC.png" height="143" width="483"/><br/></h4><ul style="color: rgba(0, 0, 0, 0.68); font-family: Roboto, sans-serif; font-size: 14px; text-align: start; background-color: rgb(255, 255, 255);"><li><span style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Monaco, Courier, monospace;">android:layout_marginStart</span></li><li><span style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Monaco, Courier, monospace;">android:layout_marginEnd</span></li><li><span style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Monaco, Courier, monospace;">android:layout_marginLeft</span></li><li><span style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Monaco, Courier, monospace;">android:layout_marginTop</span></li><li><span style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Monaco, Courier, monospace;">android:layout_marginRight</span></li><li><span style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Monaco, Courier, monospace;">android:layout_marginBottom</span></li></ul><div>    控制控件边距位置没多大变化</div><div><br/></div><div>这里要注意一种情况就是当前一个与之关联的控件隐藏之后，可以设置隐藏之后的边距值 如下图：</div><div><img src="K%20ConstraintLayout.resources/2017-06-08%2015.14.24.gif" height="792" width="1928"/><br/></div><div><br/></div><div><img src="K%20ConstraintLayout.resources/212EAD69-3FEC-4C88-B5AE-C8F118A7B43B.png" height="262" width="540"/><br/></div><ul style="color: rgba(0, 0, 0, 0.68); font-family: Roboto, sans-serif; font-size: 14px; text-align: start; background-color: rgb(255, 255, 255);"><li><span style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Monaco, Courier, monospace;">layout_goneMarginStart</span></li><li><span style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Monaco, Courier, monospace;">layout_goneMarginEnd</span></li><li><span style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Monaco, Courier, monospace;">layout_goneMarginLeft</span></li><li><span style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Monaco, Courier, monospace;">layout_goneMarginTop</span></li><li><span style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Monaco, Courier, monospace;">layout_goneMarginRight</span></li><li><span style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &quot;Liberation Mono&quot;, Menlo, Monaco, Courier, monospace;">layout_goneMarginBottom</span></li></ul><div><br/></div><div><br/></div><div><span style="font-size: 18px;">居中，偏移(Centering positioning and bias)</span></div><div><br/></div><div><br/></div><div>当某个控件设置如下属性：</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;-en-codeblock:true;"><div><br/></div><div><span style="color: #e8bf6a;">&lt;Button</span><span style="color: #e8bf6a;">    </span></div><div><span style="color: #9876aa;">android</span><span style="color: #bababa;">:layout_width=</span><span style="color: #6a8759;">"wrap_content</span><span style="color: rgb(106, 135, 89);">”    </span></div><div><span style="color: #9876aa;">android</span><span style="color: #bababa;">:layout_height=</span><span style="color: #6a8759;">"wrap_content"</span><span style="color: #6a8759;">    </span><span style="color: #9876aa;">app</span><span style="color: #bababa;">:layout_constraintLeft_toLeftOf=</span><span style="color: #6a8759;">"parent"</span><span style="color: #6a8759;">    </span><span style="color: #9876aa;">app</span><span style="color: #bababa;">:layout_constraintRight_toRightOf=</span><span style="color: #6a8759;">"parent"</span><span style="color: #6a8759;">    </span><span style="color: #9876aa;">app</span><span style="color: #bababa;">:layout_constraintHorizontal_bias=</span><span style="color: #6a8759;">".65</span><span style="color: rgb(106, 135, 89);">”</span><span style="color: rgb(232, 191, 106);">/&gt;</span></div></div><div>控件的左边右边都与父类的左边右边对齐，控件就会居中显示，可以通过设置  Horizontal_bias 来设置水平的偏置比例  是百分比值。垂直方向一样的道理</div><div><br/></div><div><span style="font-size: 18px;">尺寸约束(Dimensions constraints)</span></div><div><br/></div><div>尺寸约束分三种：固定尺寸（?dp），自适应（wrap_content），0dp（anySize根据约束条件铺满，代替match_parent）</div><div>在视图编辑界面的表示方法如下：</div><ul><li><img src="K%20ConstraintLayout.resources/20170131170403918.png" height="12" width="31"/> 表示 wrap content</li><li><img src="K%20ConstraintLayout.resources/20170131173104320.png" height="12" width="30"/> 表示固定值</li><li><img src="K%20ConstraintLayout.resources/20170131173220664.png" height="12" width="28"/> anySize 根据当前的约束条件填满，在constraintLayout 中anySize是为了顶替match parent 解决布局嵌套的问题，在ConstraintLayout中移除了 match_parent 所有在ConstraintLayout中设置 match_parent是无用的。</li></ul><div><br/></div><div><span style="font-size: 18px;">比例(Ratio)</span></div><div>app:layout_constraintDimensionRatio=“1:1”</div><div>要求：宽和高至少要有一个受约束的尺寸，也设置为 0dp（anySize 铺满父类）</div><div><br/></div><div><img src="K%20ConstraintLayout.resources/9F3E93ED-442C-4343-AD27-52BE7D0787DA.png" height="390" width="1694"/><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;-en-codeblock:true;"><div><span style="color: #e8bf6a;">&lt;?</span><span style="color: #bababa;">xml version=</span><span style="color: #6a8759;">"1.0" </span><span style="color: #bababa;">encoding=</span><span style="color: #6a8759;">"utf-8"</span><span style="color: #e8bf6a;">?&gt;</span></div><div><span style="color: #e8bf6a;">&lt;android.support.constraint.ConstraintLayout </span><span style="color: #bababa;">xmlns:</span><span style="color: #9876aa;">android</span><span style="color: #bababa;">=</span><span style="color: #6a8759;">"</span><a style="color: #6a8759;" href="http://schemas.android.com/apk/res/android">http://schemas.android.com/apk/res/android</a><span style="color: #6a8759;">"</span><span style="color: #6a8759;">    </span><span style="color: #bababa;">xmlns:</span><span style="color: #9876aa;">app</span><span style="color: #bababa;">=</span><span style="color: #6a8759;">"</span><a style="color: #6a8759;" href="http://schemas.android.com/apk/res-auto">http://schemas.android.com/apk/res-auto</a><span style="color: #6a8759;">"</span><span style="color: #6a8759;">    </span><span style="color: #bababa;">xmlns:</span><span style="color: #9876aa;">tools</span><span style="color: #bababa;">=</span><span style="color: #6a8759;">"</span><a style="color: #6a8759;" href="http://schemas.android.com/tools">http://schemas.android.com/tools</a><span style="color: rgb(106, 135, 89);">”    </span></div><div><span style="color: #9876aa;">android</span><span style="color: #bababa;">:orientation=</span><span style="color: #6a8759;">"vertical</span><span style="color: rgb(106, 135, 89);">”    </span></div><div><span style="color: #9876aa;">android</span><span style="color: #bababa;">:layout_width=</span><span style="color: #6a8759;">"match_parent</span><span style="color: rgb(106, 135, 89);">”    </span></div><div><span style="color: #9876aa;">android</span><span style="color: #bababa;">:layout_height=</span><span style="color: #6a8759;">"match_parent"</span><span style="color: #e8bf6a;">&gt;</span></div><div><br/></div><div><span style="color: #e8bf6a;">    </span><span style="color: #808080;">&lt;!--第三个按钮与前面两个imageView的区别在于</span><span style="color: #808080;">    </span></div><div><span style="color: #808080;">水平方向与垂直方向都受到了约束 这这种情况下比例直接设置"？：？</span><span style="color: rgb(128, 128, 128);">”    </span></div><div><span style="color: rgb(128, 128, 128);">第一个imageView的高度方向受到了约束，所以写法"H，10：5”，</span><span style="color: #808080;">    </span></div><div><span style="color: #808080;">第二个imageView的宽度方向受到约束，所以写法"W，1：3"--&gt;</span></div><div><span style="color: #808080;">    </span><span style="color: #e8bf6a;">&lt;ImageView </span></div><div><span style="color: #9876aa;">    </span><span style="color: #9876aa;">a</span><span style="color: rgb(152, 118, 170);">ndroid</span><span style="color: rgb(186, 186, 186);">:layout_width=</span><span style="color: rgb(106, 135, 89);">"0dp</span><span style="color: rgb(106, 135, 89);">”        </span></div><div><span style="color: #9876aa;">    </span><span style="color: #9876aa;">android</span><span style="color: #bababa;">:layout_height=</span><span style="color: #6a8759;">"0dp</span><span style="color: rgb(106, 135, 89);">”        </span></div><div><span style="color: #9876aa;">    </span><span style="color: #9876aa;">app</span><span style="color: #bababa;">:layout_constraintDimensionRatio=</span><span style="color: #6a8759;">"H,10:5</span><span style="color: rgb(106, 135, 89);">”   </span></div><div><span style="color: rgb(106, 135, 89);">    </span><span style="color: rgb(152, 118, 170);">app</span><span style="color: rgb(186, 186, 186);">:layout_constraintBottom_toBottomOf=</span><span style="color: rgb(106, 135, 89);">"parent</span><span style="color: rgb(106, 135, 89);">”    </span></div><div><span style="color: rgb(106, 135, 89);">    </span><span style="color: rgb(152, 118, 170);">app</span><span style="color: rgb(186, 186, 186);">:layout_constraintTop_toTopOf=</span><span style="color: rgb(106, 135, 89);">"parent"</span><span style="color: rgb(232, 191, 106);">/&gt;</span></div><div><br/></div><div><span style="color: #e8bf6a;">    &lt;ImageView</span><span style="color: #e8bf6a;"> </span><span style="color: rgb(232, 191, 106);"> </span></div><div><span style="color: #9876aa;">    </span><span style="color: #9876aa;">android</span><span style="color: #bababa;">:layout_width=</span><span style="color: #6a8759;">"0dp</span><span style="color: rgb(106, 135, 89);">”</span><span style="color: rgb(106, 135, 89);">   </span></div><div><span style="color: #9876aa;">    </span><span style="color: #9876aa;">android</span><span style="color: #bababa;">:layout_height=</span><span style="color: #6a8759;">"0dp</span><span style="color: rgb(106, 135, 89);">”        </span></div><div><span style="color: #9876aa;">    </span><span style="color: #9876aa;">app</span><span style="color: #bababa;">:layout_constraintLeft_toLeftOf=</span><span style="color: #6a8759;">"parent</span><span style="color: rgb(106, 135, 89);">”   </span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">app</span><span style="color: #bababa;">:layout_constraintRight_toRightOf=</span><span style="color: #6a8759;">"parent</span><span style="color: rgb(106, 135, 89);">” </span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">app</span><span style="color: #bababa;">:layout_constraintDimensionRatio=</span><span style="color: #6a8759;">"W,1:3</span><span style="color: rgb(106, 135, 89);">” </span></div><div><span style="color: rgb(106, 135, 89);">    </span><span style="color: rgb(152, 118, 170);">android</span><span style="color: rgb(186, 186, 186);">:visibility=</span><span style="color: rgb(106, 135, 89);">"visible</span><span style="color: rgb(106, 135, 89);">” </span></div><div><span style="color: rgb(106, 135, 89);">    </span><span style="color: rgb(152, 118, 170);">android</span><span style="color: rgb(186, 186, 186);">:id=</span><span style="color: rgb(106, 135, 89);">"@+id/imageView4" </span><span style="color: rgb(232, 191, 106);">/&gt;</span></div><div><br/></div><div><span style="color: #e8bf6a;">    &lt;Button</span></div><div><span style="color: #e8bf6a;">        </span><span style="color: #9876aa;">app</span><span style="color: #bababa;">:layout_constraintDimensionRatio=</span><span style="color: #6a8759;">"2:1"</span></div><div><span style="color: #6a8759;">        </span><span style="color: #9876aa;">android</span><span style="color: #bababa;">:id=</span><span style="color: #6a8759;">"@+id/button7"</span></div><div><span style="color: #6a8759;">        </span><span style="color: #9876aa;">android</span><span style="color: #bababa;">:layout_width=</span><span style="color: #6a8759;">"0dp"</span></div><div><span style="color: #6a8759;">        </span><span style="color: #9876aa;">android</span><span style="color: #bababa;">:layout_height=</span><span style="color: #6a8759;">"0dp"</span></div><div><span style="color: #6a8759;">        </span><span style="color: #9876aa;">android</span><span style="color: #bababa;">:text=</span><span style="color: #6a8759;">"Button"</span></div><div><span style="color: #6a8759;">        </span><span style="color: #9876aa;">android</span><span style="color: #bababa;">:layout_marginRight=</span><span style="color: #6a8759;">"8dp"</span></div><div><span style="color: #6a8759;">        </span><span style="color: #9876aa;">app</span><span style="color: #bababa;">:layout_constraintRight_toRightOf=</span><span style="color: #6a8759;">"parent"</span></div><div><span style="color: #6a8759;">        </span><span style="color: #9876aa;">app</span><span style="color: #bababa;">:layout_constraintBottom_toBottomOf=</span><span style="color: #6a8759;">"parent"</span></div><div><span style="color: #6a8759;">        </span><span style="color: #9876aa;">android</span><span style="color: #bababa;">:layout_marginBottom=</span><span style="color: #6a8759;">"8dp"</span></div><div><span style="color: #6a8759;">        </span><span style="color: #9876aa;">android</span><span style="color: #bababa;">:layout_marginLeft=</span><span style="color: #6a8759;">"8dp"</span></div><div><span style="color: #6a8759;">        </span><span style="color: #9876aa;">app</span><span style="color: #bababa;">:layout_constraintLeft_toLeftOf=</span><span style="color: #6a8759;">"parent"</span></div><div><span style="color: #6a8759;">        </span><span style="color: #9876aa;">app</span><span style="color: #bababa;">:layout_constraintTop_toTopOf=</span><span style="color: #6a8759;">"parent"</span></div><div><span style="color: #6a8759;">        </span><span style="color: #9876aa;">android</span><span style="color: #bababa;">:layout_marginTop=</span><span style="color: #6a8759;">"8dp" </span><span style="color: #e8bf6a;">/&gt;</span></div><div><br/></div><div><span style="color: #e8bf6a;">&lt;/android.support.constraint.ConstraintLayout&gt;</span></div></div><div><img src="K%20ConstraintLayout.resources/223BD5B2-0987-4040-9CE6-91F28AC07DD3.png" height="1098" width="2302"/><br/></div><div><br/></div><div><br/></div><div><span style="font-size: 18px;">链(Chains)</span></div><div><br/></div><div>Chains 可是实现LinearLayout 类似的功能 也可以设置 Weight</div><div><br/></div><div>先看图：</div><div><img src="K%20ConstraintLayout.resources/2017-06-08%2022.11.18.gif" height="822" width="934"/><br/></div><div><br/></div><div>官方结构图：</div><div><img src="K%20ConstraintLayout.resources/E202747E-35D7-4DD9-AFD4-3808B71FB5EA.png" height="616" width="1368"/><br/></div><div><br/></div><div><br/></div><div>Chains实现  首先控件之间要相互约束如图：</div><div><img src="K%20ConstraintLayout.resources/09B6A327-8E00-4CA8-A45F-275D7CD14B40.png" height="135" width="917"/><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;-en-codeblock:true;"><div>控件与控件之间的链接关系如代码中的黄色高亮部分，与RelativeLayout 中的写法差不多</div><div>红色代码设置链的样式 spread spread_inside packed 具体效果看下面动图。</div><div><br/></div><div><br/></div><div>&lt;Button</div><div>    android:id="@+id/button1”</div><div>    android:layout_width=“wrap_content"</div><div>    android:layout_height=“wrap_content"</div><div>    android:text=“Button"</div><div>    <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">app</span><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">:layout_constraintLeft_toLeftOf=</span><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">“parent"</span></div><div>    <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">app</span><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">:layout_constraintRight_toLeftOf=</span><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">"@+id/button2</span><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">”</span></div><div>    <span style="color: rgb(255, 38, 0);">app</span><span style="color: rgb(255, 38, 0);">:layout_constraintHorizontal_chainStyle=</span><span style="color: rgb(255, 38, 0);">“spread"</span></div><div>    app:layout_constraintTop_toTopOf=“parent"</div><div>    android:layout_marginTop="8dp" /&gt;</div><div><br/></div><div>&lt;Button</div><div>    android:id="@+id/button2”</div><div>    android:layout_width=“wrap_content"</div><div>    android:layout_height=“wrap_content"</div><div>    android:text=“Button"</div><div>    <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">app</span><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">:layout_constraintLeft_toRightOf=</span><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">"@+id/button1</span><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">”</span></div><div>    <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">app</span><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">:layout_constraintRight_toLeftOf=</span><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">"@+id/button3</span><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">”</span></div><div>    app:layout_constraintTop_toTopOf=“parent"</div><div>    android:layout_marginTop="8dp" /&gt;</div><div><br/></div><div>&lt;Button</div><div>    android:id="@+id/button3”</div><div>    android:layout_width=“wrap_content"</div><div>    android:layout_height=“wrap_content"</div><div>    android:text=“Button"</div><div>    <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">app</span><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">:layout_constraintLeft_toRightOf=</span><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">"@+id/button2</span><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">”</span></div><div>   <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;" /><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">app</span><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">:layout_constraintRight_toRightOf=</span><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">“parent"</span></div><div>   <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;" /><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">app</span><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">:layout_constraintTop_toTopOf=</span><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">“parent"</span></div><div>    android:layout_marginTop="8dp" /&gt;</div><div><br/></div><div><br/></div></div><div><br/></div><div><br/></div><div><img src="K%20ConstraintLayout.resources/2017-06-08%2022.15.57.gif" height="768" width="1992"/><br/></div><div><br/></div><div>Chain+Bias 链+偏移</div><div><img src="K%20ConstraintLayout.resources/2E7B1819-6B9D-46E4-8D7E-D7527391F059.png" height="66" width="944"/><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;-en-codeblock:true;"><div><span style="color: #e8bf6a;">&lt;TextView</span></div><div><span style="color: #e8bf6a;">    </span><span style="color: #9876aa;">android</span><span style="color: #bababa;">:id=</span><span style="color: #6a8759;">"@+id/textView2</span><span style="color: rgb(106, 135, 89);">”</span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">android</span><span style="color: #bababa;">:layout_width=</span><span style="color: rgb(106, 135, 89);">“wrap_content"</span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">android</span><span style="color: #bababa;">:layout_height=</span><span style="color: rgb(106, 135, 89);">“wrap_content"</span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">android</span><span style="color: #bababa;">:text=</span><span style="color: rgb(106, 135, 89);">“TextView"</span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">app</span><span style="color: #bababa;">:layout_constraintLeft_toLeftOf=</span><span style="color: rgb(106, 135, 89);">“parent"</span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">app</span><span style="color: #bababa;">:layout_constraintRight_toLeftOf=</span><span style="color: #6a8759;">"@+id/textView3</span><span style="color: rgb(106, 135, 89);">”</span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">android</span><span style="color: #bababa;">:layout_marginTop=</span><span style="color: rgb(106, 135, 89);">“8dp”</span><span style="color: rgb(106, 135, 89);"> </span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">app</span><span style="color: #bababa;">:layout_constraintTop_toBottomOf=</span><span style="color: #6a8759;">"@+id/button1</span><span style="color: rgb(106, 135, 89);">”</span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">app</span><span style="color: #bababa;">:layout_constraintHorizontal_chainStyle=</span><span style="color: rgb(106, 135, 89);">“packed"</span></div><div><span style="color: #6a8759;">    </span><span style="background-color: rgb(255, 250, 165); color: #9876aa;-evernote-highlight:true;">app</span><span style="background-color: rgb(255, 250, 165); color: #bababa;-evernote-highlight:true;">:layout_constraintHorizontal_bias=</span><span style="background-color: rgb(255, 250, 165); color: #6a8759;-evernote-highlight:true;">"0.7</span><span style="background-color: rgb(255, 250, 165); color: rgb(106, 135, 89);-evernote-highlight:true;">”</span><span style="color: rgb(232, 191, 106);">/&gt;</span></div><div><br/></div><div><span style="color: #e8bf6a;">&lt;TextView</span></div><div><span style="color: #e8bf6a;">    </span><span style="color: #9876aa;">android</span><span style="color: #bababa;">:id=</span><span style="color: #6a8759;">"@+id/textView3</span><span style="color: rgb(106, 135, 89);">”</span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">android</span><span style="color: #bababa;">:layout_width=</span><span style="color: rgb(106, 135, 89);">“wrap_content"</span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">android</span><span style="color: #bababa;">:layout_height=</span><span style="color: rgb(106, 135, 89);">“wrap_content"</span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">android</span><span style="color: #bababa;">:text=</span><span style="color: rgb(106, 135, 89);">“TextView"</span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">app</span><span style="color: #bababa;">:layout_constraintLeft_toRightOf=</span><span style="color: #6a8759;">"@+id/textView2</span><span style="color: rgb(106, 135, 89);">”</span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">app</span><span style="color: #bababa;">:layout_constraintRight_toLeftOf=</span><span style="color: #6a8759;">"@+id/textView4</span><span style="color: rgb(106, 135, 89);">” </span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">android</span><span style="color: #bababa;">:layout_marginTop=</span><span style="color: rgb(106, 135, 89);">“8dp"</span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">app</span><span style="color: #bababa;">:layout_constraintTop_toBottomOf=</span><span style="color: #6a8759;">"@+id/button2" </span><span style="color: #e8bf6a;">/&gt;</span></div><div><br/></div><div><span style="color: #e8bf6a;">&lt;TextView</span></div><div><span style="color: #e8bf6a;">    </span><span style="color: #9876aa;">android</span><span style="color: #bababa;">:id=</span><span style="color: #6a8759;">"@+id/textView4</span><span style="color: rgb(106, 135, 89);">”</span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">android</span><span style="color: #bababa;">:layout_width=</span><span style="color: rgb(106, 135, 89);">“wrap_content"</span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">android</span><span style="color: #bababa;">:layout_height=</span><span style="color: rgb(106, 135, 89);">“wrap_content"</span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">android</span><span style="color: #bababa;">:text=</span><span style="color: rgb(106, 135, 89);">“TextView"</span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">app</span><span style="color: #bababa;">:layout_constraintLeft_toRightOf=</span><span style="color: #6a8759;">"@+id/textView3</span><span style="color: rgb(106, 135, 89);">”</span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">app</span><span style="color: #bababa;">:layout_constraintRight_toRightOf=</span><span style="color: rgb(106, 135, 89);">“parent"</span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">android</span><span style="color: #bababa;">:layout_marginTop=</span><span style="color: #6a8759;">"8dp</span><span style="color: rgb(106, 135, 89);">” </span></div><div><span style="color: #6a8759;">   </span><span style="color: #9876aa;">app</span><span style="color: #bababa;">:layout_constraintTop_toBottomOf=</span><span style="color: #6a8759;">"@+id/button3" </span><span style="color: #e8bf6a;">/&gt;</span></div><div><br/></div></div><div><br/></div><div>Chain+Weight 链+各控件权重比</div><div><img src="K%20ConstraintLayout.resources/9381608F-D23C-40D6-A1AE-4732756756F8.png" height="88" width="912"/><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;-en-codeblock:true;"><div><span style="color: #e8bf6a;">&lt;TextView</span></div><div><span style="color: #e8bf6a;">    </span><span style="color: #9876aa;">android</span><span style="color: #bababa;">:id=</span><span style="color: #6a8759;">"@+id/textView5</span><span style="color: rgb(106, 135, 89);">”</span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">android</span><span style="color: #bababa;">:layout_width=</span><span style="color: #6a8759;">"0dp</span><span style="color: rgb(106, 135, 89);">” </span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">android</span><span style="color: #bababa;">:layout_height=</span><span style="color: rgb(106, 135, 89);">“wrap_content"</span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">android</span><span style="color: #bababa;">:text=</span><span style="color: rgb(106, 135, 89);">“TextView"</span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">app</span><span style="color: #bababa;">:layout_constraintLeft_toLeftOf=</span><span style="color: rgb(106, 135, 89);">“parent"</span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">app</span><span style="color: #bababa;">:layout_constraintRight_toLeftOf=</span><span style="color: #6a8759;">"@+id/textView6</span><span style="color: rgb(106, 135, 89);">”</span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">android</span><span style="color: #bababa;">:layout_marginTop=</span><span style="color: #6a8759;">"8dp</span><span style="color: rgb(106, 135, 89);">” </span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">app</span><span style="color: #bababa;">:layout_constraintTop_toBottomOf=</span><span style="color: #6a8759;">"@+id/textView2</span><span style="color: rgb(106, 135, 89);">”</span></div><div><span style="color: #6a8759;">    </span><span style="background-color: rgb(255, 250, 165); color: #9876aa;-evernote-highlight:true;">app</span><span style="background-color: rgb(255, 250, 165); color: #bababa;-evernote-highlight:true;">:layout_constraintHorizontal_weight=</span><span style="background-color: rgb(255, 250, 165); color: rgb(106, 135, 89);-evernote-highlight:true;">“1"</span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">app</span><span style="color: #bababa;">:layout_constraintHorizontal_chainStyle=</span><span style="color: #6a8759;">"spread_inside"</span><span style="color: #6a8759;">    </span><span style="color: #e8bf6a;">/&gt;</span></div><div><br/></div><div><span style="color: #e8bf6a;">&lt;TextView</span></div><div><span style="color: #e8bf6a;">    </span><span style="background-color: rgb(255, 250, 165); color: #9876aa;-evernote-highlight:true;">app</span><span style="background-color: rgb(255, 250, 165); color: #bababa;-evernote-highlight:true;">:layout_constraintHorizontal_weight=</span><span style="background-color: rgb(255, 250, 165); color: rgb(106, 135, 89);-evernote-highlight:true;">“2"</span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">android</span><span style="color: #bababa;">:id=</span><span style="color: #6a8759;">"@+id/textView6</span><span style="color: rgb(106, 135, 89);">”</span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">android</span><span style="color: #bababa;">:layout_width=</span><span style="color: rgb(106, 135, 89);">“0dp"</span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">android</span><span style="color: #bababa;">:layout_height=</span><span style="color: rgb(106, 135, 89);">“wrap_content"</span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">android</span><span style="color: #bababa;">:text=</span><span style="color: rgb(106, 135, 89);">“TextView"</span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">app</span><span style="color: #bababa;">:layout_constraintLeft_toRightOf=</span><span style="color: #6a8759;">"@+id/textView5</span><span style="color: rgb(106, 135, 89);">” </span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">app</span><span style="color: #bababa;">:layout_constraintRight_toLeftOf=</span><span style="color: #6a8759;">"@+id/textView7</span><span style="color: rgb(106, 135, 89);">”</span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">android</span><span style="color: #bababa;">:layout_marginTop=</span><span style="color: rgb(106, 135, 89);">“8dp"</span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">app</span><span style="color: #bababa;">:layout_constraintTop_toBottomOf=</span><span style="color: #6a8759;">"@+id/textView2" </span><span style="color: #e8bf6a;">/&gt;</span></div><div><br/></div><div><span style="color: #e8bf6a;">&lt;TextView</span></div><div><span style="color: #e8bf6a;">   </span><span style="color: #e8bf6a; background-color: rgb(255, 250, 165);-evernote-highlight:true;" /><span style="background-color: rgb(255, 250, 165); color: #9876aa;-evernote-highlight:true;">app</span><span style="background-color: rgb(255, 250, 165); color: #bababa;-evernote-highlight:true;">:layout_constraintHorizontal_weight=</span><span style="background-color: rgb(255, 250, 165); color: rgb(106, 135, 89);-evernote-highlight:true;">“2"</span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">android</span><span style="color: #bababa;">:id=</span><span style="color: #6a8759;">"@+id/textView7</span><span style="color: rgb(106, 135, 89);">”</span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">android</span><span style="color: #bababa;">:layout_width=</span><span style="color: rgb(106, 135, 89);">“0dp"</span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">android</span><span style="color: #bababa;">:layout_height=</span><span style="color: rgb(106, 135, 89);">“wrap_content"</span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">android</span><span style="color: #bababa;">:text=</span><span style="color: rgb(106, 135, 89);">“TextView"</span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">app</span><span style="color: #bababa;">:layout_constraintLeft_toRightOf=</span><span style="color: #6a8759;">"@+id/textView6</span><span style="color: rgb(106, 135, 89);">”</span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">app</span><span style="color: #bababa;">:layout_constraintRight_toRightOf=</span><span style="color: rgb(106, 135, 89);">“parent"</span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">android</span><span style="color: #bababa;">:layout_marginTop=</span><span style="color: rgb(106, 135, 89);">“8dp"</span></div><div><span style="color: #6a8759;">    </span><span style="color: #9876aa;">app</span><span style="color: #bababa;">:layout_constraintTop_toBottomOf=</span><span style="color: #6a8759;">"@+id/textView2" </span><span style="color: #e8bf6a;">/&gt;</span></div></div><div><br/></div><div><br/></div><div><span style="font-size: 18px;"> GuideLines</span></div><div><br/></div><div>基准线，用于辅助约束</div><div>看效果：</div><div><img src="K%20ConstraintLayout.resources/2017-06-08%2022.45.18.gif" height="1248" width="1760"/><br/></div><div><br/></div><div><br/></div><div><span style="font-size: 18px;">在代码中设置ConstraintLayout 属性</span></div><div><br/></div><div>官方案例：</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;-en-codeblock:true;"><div style="text-align: start;">public class MainActivity extends AppCompatActivity {</div><div style="text-align: start;"><br/></div><div style="text-align: start;">ConstraintSet mConstraintSet1 = new ConstraintSet(); // create a Constraint Set  </div><div style="text-align: start;">ConstraintSet mConstraintSet2 = new ConstraintSet(); // create a Constraint Set   </div><div style="text-align: start;">ConstraintLayout mConstraintLayout; // cache the ConstraintLayout   </div><div style="text-align: start;">boolean mOld = true;</div><div style="text-align: start;"><br/></div><div style="text-align: start;">@Override</div><div style="text-align: start;">protected void onCreate(Bundle savedInstanceState) {      </div><div style="text-align: start;">super.onCreate(savedInstanceState);       </div><div style="text-align: start;">Context context = this;</div><div style="text-align: start;"> mConstraintSet2.clone(context, R.layout.state2); // get constraints from layout</div><div style="text-align: start;"><br/></div><div style="text-align: start;">setContentView(R.layout.state1);</div><div style="text-align: start;"><br/></div><div style="text-align: start;">mConstraintLayout= (ConstraintLayout) findViewById(R.id.activity_main);</div><div style="text-align: start;"><br/></div><div style="text-align: start;">mConstraintSet1.clone(mConstraintLayout); // get constraints from ConstraintSet  </div><div style="text-align: start;">}</div><div style="text-align: start;"><br/></div><div style="text-align: start;"><br/></div><div style="text-align: start;">    </div><div style="text-align: start;">public void foo(View view) {       </div><div style="text-align: start;">TransitionManager.beginDelayedTransition(mConstraintLayout);      </div><div style="text-align: start;">if (mOld = !mOld) {</div><div style="text-align: start;">   mConstraintSet1.applyTo(mConstraintLayout); // set new constraints     </div><div style="text-align: start;">}  else {</div><div style="text-align: start;">   mConstraintSet2.applyTo(mConstraintLayout); // set new constraints       </div><div style="text-align: start;">}  </div><div>}</div><div>}</div></div><div><br/></div><div>ConstraintSet 用来创建constraintLayout 的对象 然后applyTo 应用到已存在的ConstraintLayout 中。</div><ul><li>Manually 手动创建</li></ul><div>c= new ConstraintSet(); c.connect(…);</div><ul><li>获取layout对象</li></ul><div>c.clone(context,R.layout.layout1);</div><ul><li>获取ConstraintLayout</li></ul><div>c.clone(cLayout);</div><div>具体参数方法设置查看官网说明。</div><div><br/></div><div>ConstraintLayout 一些布局设置参考文档</div><div><a href="https://developer.android.google.cn/reference/android/support/constraint/ConstraintSet.html">https://developer.android.google.cn/reference/android/support/constraint/ConstraintSet.html</a></div><div><br/></div><div><br/></div><div><img src="K%20ConstraintLayout.resources/2017-06-09%2016.37.50.gif" height="1352" width="754"/><br/></div><div><br/></div><div><br/></div><div>好了，到这里ConstraintLayout XML 属性标签 都讲的差不多 下一篇 ConstraintLayout 在java代码中的实现。</div><div><br/></div><div>以上所有案例都收录在我的github  Android-devlop-skills 仓库下，内有很多实用技巧，不断更新中。。。地址：<a href="https://github.com/ScottFJD/Android-develop-skills">https://github.com/ScottFJD/Android-develop-skills</a></div></body></html>